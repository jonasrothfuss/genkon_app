{% extends "base.html" %}


{% block body %}

    <div class="container">

      <div class="jumbotron" style="width: 100%; max-width: none; min-width: 1000px">
          <div class="container" style="width: 100%">
              <h2 style="margin: 0 auto">Registrierte Helfer</h2>
              <input type="text" id="myInput" style="margin-top: 12px; float: right" onkeyup="myFunction()" placeholder="Tabelle durchsuchen..">
          </div>

          <table id="myTable" class="profiletable">
            <tr>
                <th style="width: 64px">Details</th>
                <th style="width: 100px">Datum</th>
                <th>Vorname</th>
                <th>Nachname</th>
                <th style="width: 64px">PLZ</th>
                <th style="width: 120px">Stadt</th>
                <th style="width: 150px">E-Mail</th>
                <th>Telefonnummer</th>
                <th>Im Einsatz bei</th>
            </tr>

            {% for profile in activeprofiles %}
                <tr>
                    <td style="text-align: center; width: 64px"> <a class="btn btn-lg btn-success" style="font-size: 20px; padding-left: 20px;padding-right: 20px; margin: 0px" href="{% url 'profile_detail' %}?selected_profile={{profile.pk}}" role="button">+</a> </td>
                    <td style="width: 100px"> {{ profile.date_posted }} </td> 
                    <td> {{ profile.first_name }} </td> 
                    <td> {{ profile.last_name }}  </td> 
                    <td style="width: 64px"> {{ profile.zip_code }}  </td> 
                    <td style="width: 120px"> {{ profile.city }}  </td> 
                    <td style="width: 150px"> <a style="justify-content: left" href="mailto:{{ profile.email }} ">{{ profile.email }}</a>  </td>
                    <td> <a style="justify-content: left" href="tel:+49{{ profile.phone_number }}"> {{ profile.phone_number }} </a></td>
                    <td> {{ profile.assigned }} </td>
                </tr>
            {% endfor %}
          </table>
        
          <div class="row">
                <div class="col-xs-12">
                    <p>
                        <a class="btn btn-lg btn-success" href="{% url 'profile_csv' %}" role="button">Herunterladen</a>
                        <a class="btn btn-lg btn-success" href="{% url 'profile_new' %}" role="button">Helfer hinzuf√ºgen</a>
                        <a class="btn btn-lg btn-success" href="{% url 'logout' %}" role="button">Abmelden</a>
                    </p>
                </div>
          </div>
      </div>
    </div>

    <script>
    function myFunction() {
      // Declare variables
      var input, filter, table, tr, td, i;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");

      // Loop through all table rows, and hide those who don't match the search query
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[2];
        td2 = tr[i].getElementsByTagName("td")[3];
        td3 = tr[i].getElementsByTagName("td")[4];
        td4 = tr[i].getElementsByTagName("td")[5];
        td5 = tr[i].getElementsByTagName("td")[8];
        td6 = tr[i].getElementsByTagName("td")[1];
        if (td) {
          if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          }
          else if (td2.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          }
          else if (td3.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          }
          else if (td4.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          }
          else if (td5.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          }
          else if (td6.innerHTML.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          }
          else {
            tr[i].style.display = "none";
          }
        }
      }
    }
    </script>

{% endblock %}
